---
title: <> 行入力演算子、ダイアモンド演算子
layout: entry
---

# <> 行入力演算子、ダイアモンド演算子

## 意味

`<>` の `<` と `>` の間にはファイルハンドルまたは glob パターンを書くことができる。

1. ファイルハンドルが指定された場合は、そのファイルの内容を読み取る。
    * スカラーコンテキストで評価されると、指定されたファイルから1行読み込む。
      （改行文字があればそれも含まれる。）
        + 行は実際には $/ で指定される文字または文字列で区切られる。
        + ファイルの最後まで読み込んだら、以後の呼び出しでは undef を返す。
        + 読み込みの途中でエラーが発生した場合も undef を返す。
    * リストコンテキストで行入力演算子を評価すると、
      指定されたファイルの全内容を読み取り、1行を1要素として配列に格納する。
    * `<fh>` は `readline(*fh)` と書くこともできる。
2. glob パターンが指定された場合は、そのパターンにマッチするファイルの
   リストを取得する。
    * スカラーコンテキストで評価されると、パターンにマッチする次のファイル名が返される。
    * リストコンテキストで評価されると、パターンにマッチするファイル名のリストが返される。
    * `<pattern>` は `glob(pattern)` と書くこともできる。
3. ファイルハンドルや glob パターンを省略し、単に `<>` と書くと @ARGV の各要素を
   ファイル名とみなして順番に開いて読み込む。
    * @ARGV には事前に値を設定することもできる。
    * @ARGV が空の場合は標準入力から読み込む。



## 用例

ファイルハンドルから1行ずつ読み込む例:

    open my $fh, "<data.txt";
    while (<$fh>) {
        # 処理 ... $_ に行が格納されている
    }

配列（リストコンテキスト）で受け取ると全行を読み込む:

    open my $fh, "<data.txt";
    @lines = <fh>;


glob パターンを指定した場合はファイル名のリストが得られる:

    while (<*.html>) {
        # $_ には glob() されたファイル名が格納されている
    }

\@ARGV で指定されたファイルもしくは標準入力の読み込み

    while (<>) {
        # @ARGV で指定された各ファイルの内容を1行ずつ読み込む
        # @ARGV が空の場合は標準入力から読み込む。
    }

\@ARGV が指定されなかった時にローカルのテキストファイルをすべて読み込む

    @ARGV = grep { -f && -T } glob('*') unless @ARGV;
    while (<>) {
        # 処理 ...
    }


## 参照

$/
\@ARGV
http://perldoc.jp/pod/perlop#I47O32Operators

